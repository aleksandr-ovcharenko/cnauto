{% extends 'base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è ‚Äî CN-Auto{% endblock %}

{% block content %}
<!-- –ì–ª–∞–≤–Ω—ã–π –±–∞–Ω–Ω–µ—Ä -->
<section class="hero">
    <div class="container">
        <h2>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç–µ—Ä –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∞–≤—Ç–æ</h2>
        <p>BYD, Chery, Geely, Haval –∏ –¥—Ä—É–≥–∏–µ –º–∞—Ä–∫–∏ —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π</p>
        <a href="/catalog" class="btn btn-orange">–°–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ç–∞–ª–æ–≥</a>
    </div>
</section>

<!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∞–≤—Ç–æ (—Å–ª–∞–π–¥–µ—Ä) -->
<section class="popular-slider">
    <div class="container">
        <h2>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∞–≤—Ç–æ</h2>
        <div class="swiper swiper-popular">
            <div class="swiper-wrapper">
                {% for car in cars[:5] %} {# –ø–æ–∫–∞–∑—ã–≤–∞–µ–º 5 –º–∞—à–∏–Ω #}
                <div class="swiper-slide">
                    <div class="car-card car-card--slider">
                        <img src="{{ car.image_url }}" alt="{{ car.model }}">
                        <h3>{{ car.brand.name }} {{ car.model }}{% if car.modification %} {{ car.modification }}{% endif %}{% if car.trim %} {{ car.trim }}{% endif %}</h3>
                        <p class="price">
                            {{ car.price | format_currency(car.currency) }}
                        </p>
                        <a href="/car/{{ car.id }}" class="btn">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
        </div>
    </div>
</section>

<!-- –ë–ª–æ–∫ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ -->
<section class="advantages">
    <div class="container">
        <h2>–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å?</h2>
        <div class="advantages-grid">
            <div class="advantage-card">
                <div class="icon">üöö</div>
                <h3>–î–æ—Å—Ç–∞–≤–∫–∞ –∑–∞ 45 –¥–Ω–µ–π</h3>
                <p>–û—Ç –∑–∞–≤–æ–¥–∞ –¥–æ –≤–∞—à–µ–≥–æ –≥–æ—Ä–æ–¥–∞</p>
            </div>
            <div class="advantage-card">
                <div class="icon">üõ°Ô∏è</div>
                <h3>–ì–∞—Ä–∞–Ω—Ç–∏—è 2 –≥–æ–¥–∞</h3>
                <p>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è</p>
            </div>
            <div class="advantage-card">
                <div class="icon">üîë</div>
                <h3>–ü–æ–¥ –∫–ª—é—á</h3>
                <p>–†–∞—Å—Ç–∞–º–æ–∂–∫–∞, –ü–¢–°, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</p>
            </div>
        </div>
    </div>
</section>
{% endblock %}

<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.price').forEach(function(el) {
        const locale = el.getAttribute('data-locale');
        const currency = el.getAttribute('data-currency');
        const rawText = el.textContent.trim();
        const match = rawText.match(/([\d\s.,]+)/);
        if (!locale || !currency || !match) return;
        let num = match[1];
        num = num.replace(/\s/g, '').replace(',', '.');
        const value = parseFloat(num);
        if (isNaN(value)) return;
        try {
            el.textContent = new Intl.NumberFormat(locale, { style: 'currency', currency: currency }).format(value);
        } catch {
            el.textContent = value.toLocaleString(locale) + ' ' + currency;
        }
    });
});
</script>
